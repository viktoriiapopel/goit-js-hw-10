{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst startBt = document.querySelector('[data-start]');\nstartBt.disabled = true;\n\nconst daysEl = document.querySelector('[data-days]');\nconst hoursEl = document.querySelector('[data-hours]');\nconst minutesEl = document.querySelector('[data-minutes]');\nconst secondsEl = document.querySelector('[data-seconds]');\n\n\n\nlet userSelectedDate = null;\n\n\nconst options = {\n  enableTime: true,\n  dateFormat: \"Y-m-d H:i\",\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n    onClose(selectedDates) {\n        const today = new Date();\n        const selectedDate = selectedDates[0];\n        today.setHours(0, 0, 0, 0);\n        if (selectedDate <= today) {\n            iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n      timeout: 3000,\n    });\n            startBt.disabled = true;\n            userSelectedDate = null;\n        }\n        else {\n            userSelectedDate = selectedDate;\n            startBt.disabled = false;\n        }\n  },\n};\n\nflatpickr(\"#datetime-picker\", options);\n\nconst timer = {\n    intervalId: null,\n    initTime: null,\n\n    start() {\n        this.initTime = userSelectedDate.getTime();\n\n        if (this.intervalId) return;\n        startBt.disabled = true;\n        this.tick();\n        this.intervalId = setInterval(() => {\n            this.tick();\n        }, 1000);\n    },\n\n    tick() {\n        const currentTime = Date.now();\n        const ms = this.initTime - currentTime;\n        \n        if (ms <= 0) {\n    clearInterval(this.intervalId);\n    this.intervalId = null;\n\n      daysEl.textContent = '00';\n      hoursEl.textContent = '00';\n      minutesEl.textContent = '00';\n      secondsEl.textContent = '00';\n\n\n    iziToast.info({\n  title: 'Повідомлення',\n  message: '⏰ Час вийшов!',\n  position: 'topRight',\n  timeout: 3000,\n    });\n startBt.disabled = false; \n\n    return;\n\n    \n  }\n   const timeObject = convertMs(ms);\n   daysEl.textContent = addLeadingZero(timeObject.days);\n   hoursEl.textContent = addLeadingZero(timeObject.hours);\n   minutesEl.textContent = addLeadingZero(timeObject.minutes);\n   secondsEl.textContent = addLeadingZero(timeObject.seconds);\n    }\n}\n\nstartBt.addEventListener('click', () => {\n    timer.start();\n} )\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\n\n// function time2Str({ days, hours, minutes, seconds }) {\n//   return `${addLeadingZero(days)}:${addLeadingZero(hours)}:${addLeadingZero(minutes)}:${addLeadingZero(seconds)}`;\n// }\n\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}"],"names":["startBt","daysEl","hoursEl","minutesEl","secondsEl","userSelectedDate","options","selectedDates","today","selectedDate","iziToast","flatpickr","timer","currentTime","ms","timeObject","convertMs","addLeadingZero","days","hours","minutes","seconds","value"],"mappings":"+IAOA,MAAMA,EAAU,SAAS,cAAc,cAAc,EACrDA,EAAQ,SAAW,GAEnB,MAAMC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EAIzD,IAAIC,EAAmB,KAGvB,MAAMC,EAAU,CACd,WAAY,GACZ,WAAY,YACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACf,QAAQC,EAAe,CACnB,MAAMC,EAAQ,IAAI,KACZC,EAAeF,EAAc,CAAC,EACpCC,EAAM,SAAS,EAAG,EAAG,EAAG,CAAC,EACrBC,GAAgBD,GAChBE,EAAS,MAAM,CACrB,MAAO,QACP,QAAS,qCACT,SAAU,WACV,QAAS,GACf,CAAK,EACOV,EAAQ,SAAW,GACnBK,EAAmB,OAGnBA,EAAmBI,EACnBT,EAAQ,SAAW,GAE5B,CACH,EAEAW,EAAU,mBAAoBL,CAAO,EAErC,MAAMM,EAAQ,CACV,WAAY,KACZ,SAAU,KAEV,OAAQ,CACJ,KAAK,SAAWP,EAAiB,UAE7B,MAAK,aACTL,EAAQ,SAAW,GACnB,KAAK,KAAI,EACT,KAAK,WAAa,YAAY,IAAM,CAChC,KAAK,KAAI,CACZ,EAAE,GAAI,EACV,EAED,MAAO,CACH,MAAMa,EAAc,KAAK,MACnBC,EAAK,KAAK,SAAWD,EAE3B,GAAIC,GAAM,EAAG,CACjB,cAAc,KAAK,UAAU,EAC7B,KAAK,WAAa,KAEhBb,EAAO,YAAc,KACrBC,EAAQ,YAAc,KACtBC,EAAU,YAAc,KACxBC,EAAU,YAAc,KAG1BM,EAAS,KAAK,CAChB,MAAO,eACP,QAAS,gBACT,SAAU,WACV,QAAS,GACX,CAAK,EACJV,EAAQ,SAAW,GAEhB,MAGD,CACA,MAAMe,EAAaC,EAAUF,CAAE,EAC/Bb,EAAO,YAAcgB,EAAeF,EAAW,IAAI,EACnDb,EAAQ,YAAce,EAAeF,EAAW,KAAK,EACrDZ,EAAU,YAAcc,EAAeF,EAAW,OAAO,EACzDX,EAAU,YAAca,EAAeF,EAAW,OAAO,CACvD,CACL,EAEAf,EAAQ,iBAAiB,QAAS,IAAM,CACpCY,EAAM,MAAK,CACf,CAAG,EAEH,SAASI,EAAUF,EAAI,CAQrB,MAAMI,EAAO,KAAK,MAAMJ,EAAK,KAAG,EAE1BK,EAAQ,KAAK,MAAOL,EAAK,MAAO,IAAI,EAEpCM,EAAU,KAAK,MAAQN,EAAK,MAAO,KAAQ,GAAM,EAEjDO,EAAU,KAAK,MAASP,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAGA,QAAQ,IAAIL,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC,EAQ/B,SAASC,EAAeK,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}